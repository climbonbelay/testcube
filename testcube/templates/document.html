{% extends './base.html' %}
{% block title %}{{ name | upper }}{% endblock %}

{% load static %}

{% block body %}
    <div class="container">

        <ul class="breadcrumb">
            <li><a href="/">Home</a></li>
            <li><a href="/docs">Library</a></li>
            <li class="active">{{ name | upper }}</li>
        </ul>

        <div id="content">
            <div>{{ content }}</div>
        </div>

    </div>

{% endblock %}

{% block scripts %}
    <script>
        document.getElementById('loading-icon').classList.remove('hidden');
        require(['/static/require-config.js'], function () {
            require(['jquery', 'marked'], function ($, marked) {
                $(function () {
                    let contentDiv = $('#content');
                    let raw = contentDiv.children().first().text().trim();
                    let converted = marked(raw);
                    contentDiv.attr('data-text', raw);
                    contentDiv.empty().append(converted);
                    loadingCompleted();
                })
            });
        });
    </script>
{% endblock %}
